# Cooragentæœ¬åœ°å¼€å‘ç¯å¢ƒå¯åŠ¨å‘½ä»¤

## ç¯å¢ƒè¦æ±‚
- Python 3.12+
- Node.js (ç”¨äºNetlifyå¼€å‘æœåŠ¡å™¨)
- Conda ç¯å¢ƒç®¡ç†å™¨

## 1. ç¯å¢ƒå‡†å¤‡

### 1.1 å®‰è£…Conda (å¦‚æœæœªå®‰è£…)
```bash
# macOS ä½¿ç”¨ Homebrew å®‰è£…
brew install miniconda

# æ¥å—CondaæœåŠ¡æ¡æ¬¾
conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/main
conda tos accept --override-channels --channel https://repo.anaconda.com/pkgs/r
```

### 1.2 åˆ›å»ºCondaç¯å¢ƒ
```bash
# åˆ›å»ºPython 3.12ç¯å¢ƒ
conda create -n cooragent python=3.12 -y -c conda-forge

# æ¿€æ´»ç¯å¢ƒ
conda activate cooragent
```

### 1.3 å®‰è£…é¡¹ç›®ä¾èµ–
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/cooragent

# ä»¥å¼€å‘æ¨¡å¼å®‰è£…é¡¹ç›®
pip install -e .
```

### 1.4 ç¯å¢ƒå˜é‡é…ç½®
ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ `.env` æ–‡ä»¶ï¼ŒåŒ…å«å¿…è¦çš„APIå¯†é’¥ï¼š
```bash
# æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .env

# å¦‚æœä¸å­˜åœ¨ï¼Œä»ç¤ºä¾‹æ–‡ä»¶å¤åˆ¶
cp .env.example .env
```

## 2. æœåŠ¡å¯åŠ¨å‘½ä»¤

### 2.1 ä¸»è¦æœåŠ¡ - Cooragentä»£ç ç”Ÿæˆå™¨WebæœåŠ¡
```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate cooragent

# å¯åŠ¨WebæœåŠ¡å™¨ (æ¨èæ–¹å¼)
python generator_cli.py server --host 0.0.0.0 --port 8000
```

**è®¿é—®åœ°å€ï¼š**
- Webç•Œé¢: 
- APIæ–‡æ¡£: http://localhost:8000/docs
- å¥åº·æ£€æŸ¥: http://localhost:8000/health

 
## 3. å®Œæ•´å¯åŠ¨æµç¨‹

### 3.1 ä¸€é”®å¯åŠ¨è„šæœ¬
```bash
#!/bin/bash
# ä¿å­˜ä¸º start_cooragent.sh

echo "ğŸš€ å¯åŠ¨Cooragentå¼€å‘ç¯å¢ƒ..."

# æ¿€æ´»Condaç¯å¢ƒ
source ~/miniconda3/etc/profile.d/conda.sh
conda activate cooragent

# æ£€æŸ¥ç¯å¢ƒ
if [ $? -ne 0 ]; then
    echo "âŒ æ— æ³•æ¿€æ´»cooragentç¯å¢ƒï¼Œè¯·å…ˆåˆ›å»ºç¯å¢ƒ"
    exit 1
fi

# æ£€æŸ¥.envæ–‡ä»¶
if [ ! -f ".env" ]; then
    echo "âš ï¸  .envæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é…ç½®APIå¯†é’¥"
    exit 1
fi

# å¯åŠ¨ä¸»æœåŠ¡å™¨
echo "ğŸŒ å¯åŠ¨WebæœåŠ¡å™¨åœ¨ç«¯å£8000..."
python generator_cli.py server --host 0.0.0.0 --port 8000
```

### 3.2 ä½¿ç”¨è„šæœ¬
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x start_cooragent.sh

# è¿è¡Œè„šæœ¬
./start_cooragent.sh
```

## 4. ç«¯å£ç®¡ç†

### 4.1 æ£€æŸ¥ç«¯å£å ç”¨
```bash
# æ£€æŸ¥8000ç«¯å£
lsof -i :8000

# æ£€æŸ¥8888ç«¯å£
lsof -i :8888

# æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹
kill -9 <PID>
```

### 4.2 ç«¯å£é…ç½®
- **8000**: ä¸»è¦WebæœåŠ¡å™¨ç«¯å£ (Cooragentä»£ç ç”Ÿæˆå™¨)
- **8888**: Netlifyå¼€å‘æœåŠ¡å™¨ç«¯å£ (å¯é€‰)

## 5. æ•…éšœæ’é™¤

### 5.1 å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

**é”™è¯¯ï¼š`ModuleNotFoundError: No module named 'dotenv'`**
```bash
# è§£å†³æ–¹æ¡ˆï¼šé‡æ–°å®‰è£…ä¾èµ–
conda activate cooragent
pip install -e .
```

**é”™è¯¯ï¼š`'port' and 'targetPort' options cannot have same values`**
```bash
# è§£å†³æ–¹æ¡ˆï¼šæ›´æ”¹Netlifyç«¯å£
npx netlify dev --port 8889
```

**é”™è¯¯ï¼š`zsh: command not found: conda`**
```bash
# è§£å†³æ–¹æ¡ˆï¼šå®‰è£…miniconda
brew install miniconda
# ç„¶åé‡å¯ç»ˆç«¯æˆ–æ‰§è¡Œ source ~/.zshrc
```
http://localhost:8000/
### 5.2 ç¯å¢ƒé‡ç½®
```bash
# å®Œå…¨é‡ç½®Condaç¯å¢ƒ
conda deactivate
conda env remove -n cooragent
conda create -n cooragent python=3.12 -y -c conda-forge
conda activate cooragent
pip install -e .
```

## 6. å¼€å‘æ¨¡å¼

### 6.1 å‰å°è¿è¡Œ (ç”¨äºè°ƒè¯•)
```bash
# å‰å°è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°è¯¦ç»†æ—¥å¿—
python generator_cli.py server --port 8000
```

### 6.2 åå°è¿è¡Œ
```bash
# åå°è¿è¡Œ
nohup python generator_cli.py server --port 8000 > server.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f server.log

# åœæ­¢åå°æœåŠ¡
pkill -f "generator_cli.py server"
```

## 7. åŠŸèƒ½éªŒè¯

### 7.1 å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8000/health

# æ£€æŸ¥APIæ¥å£
curl http://localhost:8000/api/generate/examples
```

### 7.2 Webç•Œé¢æµ‹è¯•
1. è®¿é—® http://localhost:8000/
2. è¾“å…¥éœ€æ±‚ï¼š"åˆ›å»ºä¸€ä¸ªæ—…æ¸¸æ™ºèƒ½ä½“"
3. ç‚¹å‡»ç”Ÿæˆ
4. ç­‰å¾…ç”Ÿæˆå®Œæˆå¹¶ä¸‹è½½é¡¹ç›®

## 8. æ›´æ–°æ—¥å¿—
- 2024-07-24: åˆ›å»ºæ–‡æ¡£ï¼ŒåŒ…å«å®Œæ•´çš„å¯åŠ¨æµç¨‹å’Œæ•…éšœæ’é™¤æŒ‡å— 